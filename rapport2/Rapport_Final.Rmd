---
header-includes: \usepackage{hyperref} \usepackage{booktabs} \hypersetup{ colorlinks=true,
  linkcolor=blue, filecolor=magenta, urlcolor=cyan}
bibliography: ../biblio.bib
bibliographystyle: apalike
nocite: | 
  @*
output:
  pdf_document: default
---
\newpage
\begin{flushright}
    \textbf{Équipe 8}
\end{flushright}

\begin{center}
    \vspace{2\baselineskip}
    Charles Comeau \\
    (111 185 421) \\
    \vspace{1\baselineskip}
    Nicholas Langevin \\
    (111 184 631) \\
    \vspace{1\baselineskip}
    Andréanne Larouche \\
    (111 190 518) \\
    \vspace{7\baselineskip}
    Apprentissage statistique en actuariat\\
    ACT-3114 \\
    \vspace{7\baselineskip}
    {\large
    \textbf{Analyse des données de renouvellement d'assurance}} \\
    \vspace{8\baselineskip}
    présenté à \\
    Marie-Pier Côté \\
    \vspace{9\baselineskip}
    École d’actuariat \\
    Université Laval \\
    27 février 2020
\end{center}


\newpage

\tableofcontents

```{r, setup, include=FALSE}
knitr::opts_chunk$set(fig.width = 5, echo=FALSE, message=FALSE, warning=FALSE,
fig.align="center")
```

```{r, LoadingPackages, include = FALSE}
library(tidyverse)
library(pROC)
source("../script/_utilityFunction.R")
load(file="../data/trainData.RData")
load(file="../data/testData.RData")
```

# Ajustement des modèles

## k plus proches voisins

```{r, knn.bestTune}
load(file="../src/03-knn/knnTrain(fit.knn).rds")
```

Le modèle des _k_ plus proches voisins calcule les prédictions en utilisant la
distance euclédienne, ce qui veut dire que les variables catégorielles
non-ordonées doivent être transformées en $(c-1)$ variables binaires. Aussi,
les variables catégorielles ordonnées ont été transformées en des variables
numériques disctrètes $(1, 2, 3,...)$. Le modèle des _k_ plus proches voisins
comprend un seul hyperparamètre, soit le nombre de voisins (_k_) à utilité pour
la prédiction. Ce choix a été optimizer en utilisant une validation croisé à 4
plis. La valeur de _k_ qui maximise l'aire sour la courbe ROC (_fonction
d’efficacité du récepteur_) est de `r as.numeric(fit.knn$bestTune)`. Ces
valeurs, pour chaque valeurs de _k_, sont présenté dans la
\autoref{tbl:knn.plot-bestTune}.


```{r, knn.plot_bestTune, results='asis', fig.asp=.62, fig.cap="\\label{tbl:knn.plot-bestTune} Valeurs de l'aire sous la courbe ROC en fonction de différentes valeurs de \\emph{k}"}
plot(fit.knn, xlab = "k", ylab = "AUC (Validation croisée)")
```

```{r, knn.plot_ROC, results='asis', fig.height=4, fig.cap="\\label{tbl:knn.plot-ROC} TODO"}
load(file="../src/03-knn/knnModele(modele.knn).rds")
ROC(dataToNumeric(testData, "y"), modele.knn$pred, col="blue")
# roc(dataToNumeric(testData, "y"), modele.knn$pred, plot=TRUE)
```


\newpage

# Bibliographie
