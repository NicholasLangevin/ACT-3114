install.packages('tinytex')
tinytex::install_tinytex()
install.packages("VIM")
knitr::opts_chunk$set(echo = TRUE)
data(eudirectlapse)
## Changement dans les donnees
data <- data.init
# Changement des 0 et 1 de lapse en renouvellement et resignation
data$lapse <- as.factor(data$lapse)
levels(data$lapse) <- c("renouvellement", "resignation")
# Changment des valeurs unknown en NA des variables:
# polholder_diffdriver, vehicl_garage et policy_caruse
data[data$polholder_diffdriver == "unknown", ]$polholder_diffdriver <- NA
data[data$vehicl_garage == "unknown", ]$vehicl_garage <- NA
data[data$policy_caruse == "unknown", ]$policy_caruse <- NA
# Reordonnement de la variable prem_freqperyear en facteur ordonnée (ordinal)
data$prem_freqperyear <- factor(data$prem_freqperyear, order = TRUE, levels = c("1 per year", "2 per year", "4 per year", "12 per year"))
# Creation d un nouvelle variable prem_index=prem_final/prem_last
data$prem_index <- data$prem_final / data$prem_last - 1
# Traitement de la variable vehicl_powerkw: regroupement en 4 groupe
data$vehicl_powerkw_na <- data$vehicl_powerkw
data[data$vehicl_powerkw_na == "125-300 kW", ]$vehicl_powerkw_na <- NA
data[data$vehicl_powerkw %in% c("150 kW","175 kW","200 kW","225 kW","250 kW","275 kW","300 kW"), ]$vehicl_powerkw <- "125-300 kW"
data <- droplevels(data)
data$vehicl_powerkw <- factor(data$vehicl_powerkw, order = TRUE, levels = c("25-50 kW", "75 kW", "100 kW", "125-300 kW"))
table(data$vehicl_powerkw)
data <- data %>% select(-vehicl_powerkw_na)
data.traiter <- data
library(CASdatasets)
library(CASdatasets)
library(tidyverse)
library(tidyverse)
library(mice)
library(mice)
library(xtable)
library(reshape2)
library(VIM)
library(gridExtra)
library(grid)
library(lattice)
library(grid)
library(lattice)
require(FactoMineR)
require(factoextra)
library(grid)
library(lattice)
require(FactoMineR)
require(factoextra)
require(plotly)
library(cluster)
data(eudirectlapse)
data.init <- eudirectlapse
## Changement dans les donnees
data <- data.init
# Changement des 0 et 1 de lapse en renouvellement et resignation
data$lapse <- as.factor(data$lapse)
levels(data$lapse) <- c("renouvellement", "resignation")
# Changment des valeurs unknown en NA des variables:
# polholder_diffdriver, vehicl_garage et policy_caruse
data[data$polholder_diffdriver == "unknown", ]$polholder_diffdriver <- NA
data[data$vehicl_garage == "unknown", ]$vehicl_garage <- NA
data[data$policy_caruse == "unknown", ]$policy_caruse <- NA
# Reordonnement de la variable prem_freqperyear en facteur ordonnée (ordinal)
data$prem_freqperyear <- factor(data$prem_freqperyear, order = TRUE, levels = c("1 per year", "2 per year", "4 per year", "12 per year"))
# Creation d un nouvelle variable prem_index=prem_final/prem_last
data$prem_index <- data$prem_final / data$prem_last - 1
# Traitement de la variable vehicl_powerkw: regroupement en 4 groupe
data$vehicl_powerkw_na <- data$vehicl_powerkw
data[data$vehicl_powerkw_na == "125-300 kW", ]$vehicl_powerkw_na <- NA
data[data$vehicl_powerkw %in% c("150 kW","175 kW","200 kW","225 kW","250 kW","275 kW","300 kW"), ]$vehicl_powerkw <- "125-300 kW"
data <- droplevels(data)
data$vehicl_powerkw <- factor(data$vehicl_powerkw, order = TRUE, levels = c("25-50 kW", "75 kW", "100 kW", "125-300 kW"))
table(data$vehicl_powerkw)
data <- data %>% select(-vehicl_powerkw_na)
data.traiter <- data
data <- data %>% select(-vehicl_powerkw_na)
data %>% select(-vehicl_powerkw_na)
data.traiter <- data
data <- data %>% select(-vehicl_powerkw_na)
data.traiter <- data
data <- data %>% select(-vehicl_powerkw_na)
data.traiter <- data
data <- data %>% select(-vehicl_powerkw_na)
data <- data %>% select(-vehicl_powerkw_na)
print.tables <- function(dat, caption="", label="", align=rep("c", ncol(dat)+1), digits=3, ...){
print(xtable(dat, digits = digits,
caption=caption,
label=label,
align=align),
include.rownames = FALSE, sanitize.text.function=function(x){x},
caption.placement = "top", comment=FALSE, ...)
}
print.tables <- function(dat, caption="", label="", align=rep("c", ncol(dat)+1), digits=3, ...){
print(xtable(dat, digits = digits,
caption=caption,
label=label,
align=align),
include.rownames = FALSE, sanitize.text.function=function(x){x},
caption.placement = "top", comment=FALSE, ...)
}
levels(data$lapse)
nrow(data[data$lapse == "renouvellement",])
round(nrow(data[data$lapse == "renouvellement",])/nrow(data)*100, 2)
nrow(data[data$lapse == "renouvellement",])
nrow(data)
nrow(data[data$lapse == "renouvellement",])/nrow(data)*100
nrow(data[data$lapse == "renouvellement",])/nrow(data)
summary(data$polholder_diffdriver)
sum(summary(data$polholder_diffdriver))
data[data$polholder_diffdriver == "commercial"]
data[data$polholder_diffdriver == "commercial",]
data[data$polholder_diffdriver == "commercial" & data$polholder_diffdriver != NA,]
data[data$polholder_diffdriver == "commercial",]
summary(data$polholder_diffdriver)
summary(data$policy_caruse)
data[data$polholder_diffdriver == "commercial" && !is.na(data$polholder_diffdriver),]
data[data$polholder_diffdriver == "commercial" & !is.na(data$polholder_diffdriver),]
rep("c",5)
data[data$polholder_diffdriver == "all drivers > 24" & !is.na(data$polholder_diffdriver),]
summary(data$polholder_diffdriver)[1]
summary(data$polholder_diffdriver)[c("all drivers > 24")]
summary(data$polholder_diffdriver)
summary(data$polholder_diffdriver)[c("NA")
o
summary(data$polholder_diffdriver)[c("NA")]
summary(data$polholder_diffdriver)[c("NA's")]
data[data$polholder_diffdriver == ";earner 17" & !is.na(data$polholder_diffdriver),]
data[data$polholder_diffdriver == "learner 17" & !is.na(data$polholder_diffdriver),]
summary(data$polholder_gender)
summary(data$polholder_gender)c("Male")
summary(data$polholder_gender)[c("Male")]
knitr::opts_chunk$set(echo = TRUE)
library(CASdatasets)
library(tidyverse)
library(mice)
library(xtable)
library(reshape2)
library(VIM)
library(gridExtra)
library(grid)
library(lattice)
require(FactoMineR)
require(factoextra)
require(plotly)
library(cluster)
data(eudirectlapse)
data.init <- eudirectlapse
## Changement dans les donnees
data <- data.init
# Changement des 0 et 1 de lapse en renouvellement et resignation
data$lapse <- as.factor(data$lapse)
levels(data$lapse) <- c("renouvellement", "resignation")
# Changment des valeurs unknown en NA des variables:
# polholder_diffdriver, vehicl_garage et policy_caruse
data[data$polholder_diffdriver == "unknown", ]$polholder_diffdriver <- NA
data[data$vehicl_garage == "unknown", ]$vehicl_garage <- NA
data[data$policy_caruse == "unknown", ]$policy_caruse <- NA
# Reordonnement de la variable prem_freqperyear en facteur ordonnée (ordinal)
data$prem_freqperyear <- factor(data$prem_freqperyear, order = TRUE, levels = c("1 per year", "2 per year", "4 per year", "12 per year"))
# Creation d un nouvelle variable prem_index=prem_final/prem_last
data$prem_index <- data$prem_final / data$prem_last - 1
# Traitement de la variable vehicl_powerkw: regroupement en 4 groupe
data$vehicl_powerkw_na <- data$vehicl_powerkw
data[data$vehicl_powerkw_na == "125-300 kW", ]$vehicl_powerkw_na <- NA
data[data$vehicl_powerkw %in% c("150 kW","175 kW","200 kW","225 kW","250 kW","275 kW","300 kW"), ]$vehicl_powerkw <- "125-300 kW"
data <- droplevels(data)
data$vehicl_powerkw <- factor(data$vehicl_powerkw, order = TRUE, levels = c("25-50 kW", "75 kW", "100 kW", "125-300 kW"))
table(data$vehicl_powerkw)
data <- data %>% select(-vehicl_powerkw_na)
data.traiter <- data
print.tables <- function(dat, caption="", label="", align=rep("c", ncol(dat)+1), digits=3, ...){
print(xtable(dat, digits = digits,
caption=caption,
label=label,
align=align),
include.rownames = FALSE, sanitize.text.function=function(x){x},
caption.placement = "top", comment=FALSE, ...)
}
l1 <- c(round(summary(data$polholder_gender)[c("Male")]/nrow(data)*100, 2))
l2 <- c(round(summary(data$polholder_gender)[c("Female")]/nrow(data)*100, 2))
l1
l2
ligne_name <- c("Homme", "Femme")
tableau_sexe <- cbind(ligne_name ,rbind(l1 , l2))
tableau_sexe
dat_frame_tab <- as.data.frame(tableau_sexe)
colnames(dat_frame_tab) <- c("Sexe", "%")
print.tables(dat_frame_tab, hline.after=c(-1,0,2), digits=2, align = c("l", "l", "c"))
update.packages(ask = FALSE, checkBuilt = TRUE)
tinytex::tlmgr_update()
l1 <- c(summary(data$polholder_diffdriver)[c("all drivers > 24")])
l2 <- c(summary(data$polholder_diffdriver)[c("commercial")])
l3 <- c(summary(data$polholder_diffdriver)[c("learner 17")])
l4 <- c(summary(data$polholder_diffdriver)[c("only partner")])
l5 <- c(summary(data$polholder_diffdriver)[c("same")])
l6 <- c(summary(data$polholder_diffdriver)[c("young drivers")])
l7 <- c(summary(data$polholder_diffdriver)[c("NA's")])
ligne_name <- c("Conducteurs agée de 24+","Commerciale","Conducteur apprenti de 17 ans","Partenaire de couple", "Utilisateur seul", "Jeunes utilisateurs", "Données manquantes")
tableau_statut <- cbind(ligne_name ,rbind(l1 , l2, l3, l4, l5, l6, l7))
dat_frame_tab <- as.data.frame(tableau_statut)
colnames(dat_frame_tab) <- c("Statut", "Nombre d'observation")
dat_frame_tab
l1 <- c(round(summary(data$polholder_gender)[c("Male")]/nrow(data)*100, 2))
l2 <- c(round(summary(data$polholder_gender)[c("Female")]/nrow(data)*100, 2))
ligne_name <- c("Homme", "Femme")
tableau_sexe <- cbind(ligne_name ,rbind(l1 , l2))
dat_frame_tab <- as.data.frame(tableau_sexe)
colnames(dat_frame_tab) <- c("Sexe", "%")
dat_frame_tab
l1 <- c(summary(data$polholder_diffdriver)[c("all drivers > 24")])
l2 <- c(summary(data$polholder_diffdriver)[c("commercial")])
l3 <- c(summary(data$polholder_diffdriver)[c("learner 17")])
l4 <- c(summary(data$polholder_diffdriver)[c("only partner")])
l5 <- c(summary(data$polholder_diffdriver)[c("same")])
l6 <- c(summary(data$polholder_diffdriver)[c("young drivers")])
l7 <- c(summary(data$polholder_diffdriver)[c("NA's")])
ligne_name <- c("Conducteurs agée de 24+","Commerciale","Conducteur apprenti de 17 ans","Partenaire de couple", "Utilisateur seul", "Jeunes utilisateurs", "Données manquantes")
tableau_statut <- cbind(ligne_name ,rbind(l1 , l2, l3, l4, l5, l6, l7))
dat_frame_tab <- as.data.frame(tableau_statut)
colnames(dat_frame_tab) <- c("Statut", "Nombre d'observation")
print.tables(dat_frame_tab, hline.after=c(-1,0,7), digits=2, align = c("l", "l", "c"))
l1 <- c(round(summary(data$polholder_gender)[c("Male")]/nrow(data)*100, 2))
l2 <- c(round(summary(data$polholder_gender)[c("Female")]/nrow(data)*100, 2))
ligne_name <- c("Homme", "Femme")
tableau_sexe <- cbind(ligne_name ,rbind(l1 , l2))
dat_frame_tab <- as.data.frame(tableau_sexe)
colnames(dat_frame_tab) <- c("Sexe", "%")
print.tables(dat_frame_tab, hline.after=c(-1,0,2), digits=2, align = c("l", "l", "c"))
c(round(summary(data$polholder_gender)[c("Male")]/nrow(data)*100, 2))
l1 <- c(summary(data$polholder_diffdriver)[c("all drivers > 24")])
l2 <- c(summary(data$polholder_diffdriver)[c("commercial")])
l3 <- c(summary(data$polholder_diffdriver)[c("learner 17")])
l4 <- c(summary(data$polholder_diffdriver)[c("only partner")])
l5 <- c(summary(data$polholder_diffdriver)[c("same")])
l6 <- c(summary(data$polholder_diffdriver)[c("young drivers")])
l7 <- c(summary(data$polholder_diffdriver)[c("NA's")])
ligne_name <- c("Conducteurs agée de 24+","Commerciale","Conducteur apprenti de 17 ans","Partenaire de couple", "Utilisateur seul", "Jeunes utilisateurs", "Données manquantes")
tableau_statut <- cbind(ligne_name ,rbind(l1 , l2, l3, l4, l5, l6, l7))
dat_frame_tab <- as.data.frame(tableau_statut)
colnames(dat_frame_tab) <- c("Statut", "Nombre d'observation")
print.tables(dat_frame_tab, hline.after=c(-1,0,7), digits=2, align = c("l", "l", "c"))
p1 <- c(round(summary(data$polholder_gender)[c("Male")]/nrow(data)*100, 2))
p+2 <- c(round(summary(data$polholder_gender)[c("Female")]/nrow(data)*100, 2))
p2 <- c(round(summary(data$polholder_gender)[c("Female")]/nrow(data)*100, 2))
ligne_name <- c("Homme", "Femme")
tableau_sexe <- cbind(ligne_name ,rbind(l1 , l2))
dat_frame_tab2 <- as.data.frame(tableau_sexe)
colnames(dat_frame_tab2) <- c("Sexe", "%")
print.tables(dat_frame_tab2, hline.after=c(-1,0,2), digits=2)
dat_frame_tab
dat_frame_tab2
p1 <- c(round(summary(data$polholder_gender)[c("Male")]/nrow(data)*100, 2))
p2 <- c(round(summary(data$polholder_gender)[c("Female")]/nrow(data)*100, 2))
ligne_name <- c("Homme", "Femme")
tableau_sexe <- cbind(ligne_name ,rbind(p1 , p2))
dat_frame_tab2 <- as.data.frame(tableau_sexe)
colnames(dat_frame_tab2) <- c("Sexe", "%")
print.tables(dat_frame_tab2, hline.after=c(-1,0,2), digits=2)
tinytex::reinstall_tinytex()
